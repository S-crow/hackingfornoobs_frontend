{"ast":null,"code":"import _classCallCheck from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import ActiveDirectoryImg from\"../img/active_directory.png\";import Laps from\"../img/laps.png\";var ActiveDirectory=/*#__PURE__*/function(_React$Component){_inherits(ActiveDirectory,_React$Component);function ActiveDirectory(){_classCallCheck(this,ActiveDirectory);return _possibleConstructorReturn(this,_getPrototypeOf(ActiveDirectory).apply(this,arguments));}_createClass(ActiveDirectory,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"article\"},React.createElement(\"h1\",null,\"Active Directory\"),React.createElement(\"hr\",null),React.createElement(\"p\",{className:\"tabulation\"},\"Cible privil\\xE9gi\\xE9e des cyber-attaques depuis plusieurs ann\\xE9es en raison de son usage dans le monde entier, sa compromission entra\\xEEne une prise de contr\\xF4le totale du syst\\xE8me d'information. \",React.createElement(\"br\",null),React.createElement(\"br\",null),\"La m\\xE9thodologie d'un pentest interne dans un environnement Active Directory se base sur des vecteurs d'attaques biens connus que nous pr\\xE9senterons dans cet article.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"La solution \\xE0 terme pourrait \\xEAtre la migration des technologies vers le Cloud qui forcera peut \\xEAtre \\xE0 l'avenir les organisations \\xE0 repenser l'architecture et la s\\xE9curit\\xE9 des comptes de leurs infrastructures.\"),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Qu'est-ce que l'Active Directory ?\"),React.createElement(\"img\",{id:\"activedirectory_img\",src:ActiveDirectoryImg,alt:\"logo active directory\"}),React.createElement(\"div\",{className:\"tabulation\"},\"Depuis Windows 2000 Microsoft offre une solution de gestion des ressources internes pour les entreprises : \",React.createElement(\"strong\",null,\"Active Directory Domain Services (ADDS)\"),\" qui est un annuaire proposant des services de 3 cat\\xE9gories :\",React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Authentification (via le protole Kerberos)\"),React.createElement(\"li\",null,\"Annuaire (via le protocole LDAP)\"),React.createElement(\"li\",null,\"Collection de services (strat\\xE9gies de groupes, gestion des droits, DNS)\"))),React.createElement(\"p\",{className:\"tabulation\"},\"Au sein d'un r\\xE9seau interne l'annuaire est garant de l'identit\\xE9 d'une personne, mais n'a cependant pas vocation \\xE0 autoriser l'acc\\xE8s ou non d'un individu \\xE0 une ressource. L'AD peut \\xEAtre faire la jonction entre plusieurs services : base de comptes pour un service Radius, authentification applicative par proxy LDAP, int\\xE9grer des machines via Kerberos, etc\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Les avantages des services de domaine Active Directory\"),\"Pour l\\u2019administration de base des utilisateurs et ordinateurs r\\xE9seau, l\\u2019utilisation d\\u2019AD DS pr\\xE9sente plusieurs avantages :\",React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Personnalisation de l'organisation des donn\\xE9es de fa\\xE7on \\xE0 r\\xE9pondre aux besoins de l'entreprise\"),React.createElement(\"li\",null,\"Gestion AD DS \\xE0 partir de n\\u2019importe quel ordinateur du r\\xE9seau\"),React.createElement(\"li\",null,\"R\\xE9plication et redondance (si un contr\\xF4leur de domaine tombe en panne, un autre DC r\\xE9cup\\xE8re la charge)\"),React.createElement(\"li\",null,\"Gestion centralis\\xE9e des droits d\\u2019acc\\xE8s au r\\xE9seau\")),React.createElement(\"p\",null,\"Par son r\\xF4le central et strat\\xE9gique, l'AD est un \\xE9l\\xE9ment crucial au coeur de l'infrastructure qui influe donc sur toute la s\\xE9curit\\xE9 du SI.\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Comment s\\xE9curiser un environnement Active Directory ?\"),React.createElement(\"p\",null,\"- Configurer \",React.createElement(\"strong\",null,\"LAPS\"),\", c'est une solution de Microsoft permettant d'assurer une rotation des mots de passe des comptes administrateurs locaux sur les workstations et les serveurs. Cela garantit un niveau de s\\xE9curit\\xE9 minimal sur les postes.\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"img\",{id:\"laps\",src:Laps,alt:\"sch\\xE9ma LAPS\"}),\"- Utiliser des mots de passes robustes pour les comptes de services. Il existe des \",React.createElement(\"strong\",null,\"Managed Service Accounts\"),\" qui offrent une couche de s\\xE9curit\\xE9 suppl\\xE9mentaires au sein de l'AD mais en pratique encore beaucoup de soci\\xE9t\\xE9s continuent de se servir de comptes utilisateurs standards afin de manager leurs services.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"- Filtrer les communications entre les machines. Apr\\xE8s la compromission d'une premi\\xE8re machine, un attaquant va tenter d'effectuer des mouvements lat\\xE9raux dans le r\\xE9seau. Pour cela il va essayer de spread les mots de passe d\\xE9j\\xE0 r\\xE9cup\\xE9r\\xE9s. Il faut donc veiller \\xE0 ce que les comptes de services n'utilisent pas les m\\xEAmes mots de passe, et contr\\xF4ler et restreindre les communications entre les machines afin de contenir une \\xE9ventuelle attaque. Une bonne pratique est aussi d'utiliser le firewall embarqu\\xE9 de Windows pour bloquer certains protocoles et collecter les logs vers un serveur central \\xE0 cet effet du genre de Splunk.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"- Ne pas utiliser les groupes \",React.createElement(\"strong\",null,\"Built-in\"),\" fournis par d\\xE9faut par l'AD. Ils permettent de nombreux privil\\xE8ges, par exemple les membres du groupe \\\"backup operators\\\" peuvent r\\xE9aliser une sauvegarde de la base \",React.createElement(\"strong\",null,\"NTDS.dit\"),React.createElement(\"br\",null),React.createElement(\"br\",null),\"- Auditer r\\xE9guli\\xE8rement l'Active Directory au moyen de solutions telles que \",React.createElement(\"strong\",null,\"PingCastel\"),\" (cartographie du niveau de s\\xE9curit\\xE9 \\xE0 un instant T) ou \",React.createElement(\"strong\",null,\"Alsid\"),\" (surveillance et d\\xE9tections d'attaques sur l'AD)\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"- Pr\\xE9voir un \",React.createElement(\"strong\",null,\"Plan de Continuit\\xE9 d'Activit\\xE9\"),\" (PCA) pour \\xEAtre pr\\xEAt \\xE0 toutes \\xE9ventualit\\xE9s (versions papier, sauvegardes, formation du personnel).\"));}}]);return ActiveDirectory;}(React.Component);export default ActiveDirectory;","map":{"version":3,"sources":["/mnt/c/Users/Nico/hackingfornoobs_frontend/src/components/ActiveDirectory.js"],"names":["React","ActiveDirectoryImg","Laps","ActiveDirectory","Component"],"mappings":"+nBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,6BAA/B,CACA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,C,GAEMC,CAAAA,e,yTACO,CACP,MACE,4BAAK,SAAS,CAAC,SAAf,EACE,iDADF,CAEE,8BAFF,CAGE,yBAAG,SAAS,CAAC,YAAb,kNAAqN,8BAArN,CAA0N,8BAA1N,8KAEoK,8BAFpK,CAEyK,8BAFzK,wOAHF,CAQM,8BARN,CAUE,mEAVF,CAYE,2BAAK,EAAE,CAAC,qBAAR,CAA8B,GAAG,CAAEF,kBAAnC,CAAuD,GAAG,CAAC,uBAA3D,EAZF,CAcE,2BAAK,SAAS,CAAC,YAAf,gHAAuI,4EAAvI,oEACE,8BACE,2EADF,CAEE,iEAFF,CAGE,2GAHF,CADF,CAdF,CAsBE,yBAAG,SAAS,CAAC,YAAb,4XAtBF,CAyBE,8BAzBF,CAyBO,8BAzBP,CAyBY,8BAzBZ,CA2BE,uFA3BF,mJA+BE,8BACE,2IADF,CAEE,yGAFF,CAGE,mJAHF,CAIE,+FAJF,CA/BF,CAsCE,4LAtCF,CAyCE,8BAzCF,CAyCO,8BAzCP,CAyCY,8BAzCZ,CA2CE,yFA3CF,CA4CE,6CACe,yCADf,oOAC8P,8BAD9P,CACmQ,8BADnQ,CAGE,2BAAK,EAAE,CAAC,MAAR,CAAe,GAAG,CAAEC,IAApB,CAA0B,GAAG,CAAC,gBAA9B,EAHF,uFAKqF,6DALrF,6NAKwU,8BALxU,CAK6U,8BAL7U,gqBAOinB,8BAPjnB,CAOsnB,8BAPtnB,kCASgC,6CAThC,oLAS8N,6CAT9N,CASuP,8BATvP,CAS4P,8BAT5P,sFAW8E,+CAX9E,qEAWiK,0CAXjK,wDAWwO,8BAXxO,CAW6O,8BAX7O,oBAae,wEAbf,sHA5CF,CADF,CA8DD,C,6BAhEyBF,KAAK,CAACI,S,EAoElC,cAAeD,CAAAA,eAAf","sourcesContent":["import React from 'react';\r\nimport ActiveDirectoryImg from \"../img/active_directory.png\"\r\nimport Laps from \"../img/laps.png\"\r\n\r\nclass ActiveDirectory extends React.Component {\r\n    render() {\r\n      return (\r\n        <div className=\"article\">\r\n          <h1>Active Directory</h1>\r\n          <hr/>\r\n          <p className=\"tabulation\">Cible privilégiée des cyber-attaques depuis plusieurs années en raison de son usage dans le monde entier, sa compromission entraîne une prise de contrôle totale du système d'information. <br/><br/>\r\n          \r\n          La méthodologie d'un pentest interne dans un environnement Active Directory se base sur des vecteurs d'attaques biens connus que nous présenterons dans cet article.<br/><br/>\r\n          \r\n          La solution à terme pourrait être la migration des technologies vers le Cloud qui forcera peut être à l'avenir les organisations à repenser l'architecture et la sécurité des comptes de leurs infrastructures. \r\n          </p><br/>\r\n\r\n          <h2>Qu'est-ce que l'Active Directory ?</h2>\r\n\r\n          <img id=\"activedirectory_img\" src={ActiveDirectoryImg} alt=\"logo active directory\"/>\r\n\r\n          <div className=\"tabulation\">Depuis Windows 2000 Microsoft offre une solution de gestion des ressources internes pour les entreprises : <strong>Active Directory Domain Services (ADDS)</strong> qui est un annuaire proposant des services de 3 catégories :\r\n            <ul>\r\n              <li>Authentification (via le protole Kerberos)</li>\r\n              <li>Annuaire (via le protocole LDAP)</li>\r\n              <li>Collection de services (stratégies de groupes, gestion des droits, DNS)</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <p className=\"tabulation\">Au sein d'un réseau interne l'annuaire est garant de l'identité d'une personne, mais n'a cependant pas vocation à autoriser l'accès ou non d'un individu à une ressource.\r\n\r\n          L'AD peut être faire la jonction entre plusieurs services : base de comptes pour un service Radius, authentification applicative par proxy LDAP, intégrer des machines via Kerberos, etc</p>\r\n          <br/><hr/><br/>\r\n\r\n          <h2>Les avantages des services de domaine Active Directory</h2>\r\n\r\n          Pour l’administration de base des utilisateurs et ordinateurs réseau, l’utilisation d’AD DS présente plusieurs avantages :\r\n\r\n          <ul>\r\n            <li>Personnalisation de l'organisation des données de façon à répondre aux besoins de l'entreprise</li>\r\n            <li>Gestion AD DS à partir de n’importe quel ordinateur du réseau</li>\r\n            <li>Réplication et redondance (si un contrôleur de domaine tombe en panne, un autre DC récupère la charge)</li>\r\n            <li>Gestion centralisée des droits d’accès au réseau</li>\r\n          </ul>\r\n\r\n          <p>Par son rôle central et stratégique, l'AD est un élément crucial au coeur de l'infrastructure qui influe donc sur toute la sécurité du SI.\r\n          </p>   \r\n\r\n          <br/><hr/><br/>\r\n\r\n          <h2>Comment sécuriser un environnement Active Directory ?</h2>\r\n          <p>\r\n            - Configurer <strong>LAPS</strong>, c'est une solution de Microsoft permettant d'assurer une rotation des mots de passe des comptes administrateurs locaux sur les workstations et les serveurs. Cela garantit un niveau de sécurité minimal sur les postes.<br/><br/>\r\n\r\n            <img id=\"laps\" src={Laps} alt=\"schéma LAPS\"/>\r\n\r\n            - Utiliser des mots de passes robustes pour les comptes de services. Il existe des <strong>Managed Service Accounts</strong> qui offrent une couche de sécurité supplémentaires au sein de l'AD mais en pratique encore beaucoup de sociétés continuent de se servir de comptes utilisateurs standards afin de manager leurs services.<br/><br/>\r\n\r\n            - Filtrer les communications entre les machines. Après la compromission d'une première machine, un attaquant va tenter d'effectuer des mouvements latéraux dans le réseau. Pour cela il va essayer de spread les mots de passe déjà récupérés. Il faut donc veiller à ce que les comptes de services n'utilisent pas les mêmes mots de passe, et contrôler et restreindre les communications entre les machines afin de contenir une éventuelle attaque. Une bonne pratique est aussi d'utiliser le firewall embarqué de Windows pour bloquer certains protocoles et collecter les logs vers un serveur central à cet effet du genre de Splunk.<br/><br/>\r\n\r\n            - Ne pas utiliser les groupes <strong>Built-in</strong> fournis par défaut par l'AD. Ils permettent de nombreux privilèges, par exemple les membres du groupe \"backup operators\" peuvent réaliser une sauvegarde de la base <strong>NTDS.dit</strong><br/><br/>\r\n\r\n            - Auditer régulièrement l'Active Directory au moyen de solutions telles que <strong>PingCastel</strong> (cartographie du niveau de sécurité à un instant T) ou <strong>Alsid</strong> (surveillance et détections d'attaques sur l'AD)<br/><br/>\r\n\r\n            - Prévoir un <strong>Plan de Continuité d'Activité</strong> (PCA) pour être prêt à toutes éventualités (versions papier, sauvegardes, formation du personnel).\r\n          </p>\r\n        </div>  \r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  export default ActiveDirectory;"]},"metadata":{},"sourceType":"module"}